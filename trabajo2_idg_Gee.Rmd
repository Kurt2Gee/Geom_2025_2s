---
title: "Brecha Digital y Acceso a Internet M√≥vil en la Regi√≥n Metropolitana de Santiago: Un an√°lisis territorial mediante microsimulaci√≥n (CASEN‚ÄìCenso 2017)"
author: "Kurt Gee Casta√±er"
date: "`r Sys.Date()`"
output: html_document
---

# 1. Introducci√≥n

Las tecnolog√≠as digitales no son herramientas neutras. Su despliegue y distribuci√≥n responden a decisiones hist√≥ricas, econ√≥micas y pol√≠ticas que, en muchos casos, han privilegiado a determinados sectores sociales y territorios sobre otros. Esta l√≥gica de desarrollo tecnol√≥gico, guiada principalmente por criterios de rentabilidad y concentraci√≥n urbana, ha generado un acceso desigual a la conectividad digital, profundizando las brechas existentes en las ciudades contempor√°neas.

Durante las √∫ltimas d√©cadas, el acceso a Internet se ha consolidado como un requisito fundamental para la participaci√≥n plena en la sociedad: permite acceder a la educaci√≥n, al trabajo, a la informaci√≥n y a los servicios p√∫blicos. Sin embargo, la infraestructura y cobertura digital no se distribuyen equitativamente. Mientras algunos territorios metropolitanos disfrutan de conectividad estable y de alta velocidad, otros ‚Äîparticularmente los sectores perif√©ricos y de menor ingreso‚Äî enfrentan limitaciones severas o directamente carecen de acceso.  

Esta desigualdad, conocida como brecha digital, refleja una dimensi√≥n estructural de exclusi√≥n que combina factores tecnol√≥gicos, socioecon√≥micos y espaciales. No se trata √∫nicamente de la falta de dispositivos o conexi√≥n, sino de una carencia m√°s profunda: la imposibilidad de participar en los flujos de informaci√≥n y conocimiento que definen la vida moderna. En este sentido, el acceso a Internet se convierte en un nuevo eje de desigualdad urbana, an√°logo al acceso hist√≥rico a la educaci√≥n, la vivienda o la movilidad.

La Regi√≥n Metropolitana de Santiago, como principal centro urbano del pa√≠s, sintetiza esta problem√°tica. Su estructura territorial revela una fuerte segregaci√≥n socioespacial, en la que las comunas con mayores ingresos concentran la infraestructura tecnol√≥gica, mientras que las periferias urbanas presentan d√©ficits persistentes de conectividad. La brecha digital, por tanto, no solo expresa una diferencia t√©cnica, sino una inequidad territorial en el derecho a la informaci√≥n y al desarrollo.

En funci√≥n de lo anterior, el presente trabajo tiene como objetivo visibilizar las desigualdades territoriales en el acceso a Internet m√≥vil en la Regi√≥n Metropolitana de Santiago, identificando los patrones espaciales de conectividad y su relaci√≥n con las condiciones socioecon√≥micas comunales. Para ello, se integran datos provenientes de la Encuesta CASEN y del Censo 2017, aplicando t√©cnicas de microsimulaci√≥n y an√°lisis geoespacial que permiten estimar la distribuci√≥n del acceso a Internet por banda ancha m√≥vil a nivel comunal y zonal.

El an√°lisis busca contribuir a la comprensi√≥n de la brecha digital como fen√≥meno territorial, evidenciando c√≥mo las diferencias en conectividad reproducen y amplifican las desigualdades urbanas preexistentes. Asimismo, se propone ofrecer una base emp√≠rica para el dise√±o de pol√≠ticas p√∫blicas orientadas a la equidad digital y la justicia espacial, promoviendo una planificaci√≥n tecnol√≥gica m√°s inclusiva en el contexto metropolitano.

## 1.1. Objetivo General

Analizar las desigualdades territoriales en el acceso a Internet por banda ancha m√≥vil en la Regi√≥n Metropolitana de Santiago, a partir de la integraci√≥n de datos del Censo 2017 y la Encuesta CASEN mediante t√©cnicas de microsimulaci√≥n y an√°lisis geoespacial, con el prop√≥sito de identificar los patrones espaciales de la brecha digital y aportar evidencia para el dise√±o de pol√≠ticas p√∫blicas orientadas a la equidad digital y la justicia territorial.

## 1.2. Objetivos Espec√≠ficos

Los objetivos espec√≠ficos por trabajar son:

1.Integrar informaci√≥n proveniente del Censo 2017 y la Encuesta CASEN, mediante t√©cnicas de microsimulaci√≥n, con el fin de estimar el nivel de acceso a Internet por banda ancha m√≥vil a escala comunal y zonal dentro de la Regi√≥n Metropolitana de Santiago.

2.Representar cartogr√°ficamente los patrones espaciales de conectividad digital utilizando herramientas de an√°lisis geoespacial, destacando las diferencias territoriales entre comunas y zonas censales urbanas.

3. Identificar √°reas con mayores d√©ficits de conectividad, relacionando los resultados con variables socioecon√≥micas y demogr√°ficas relevantes que influyen en la desigualdad digital.

4. Interpretar los resultados desde un enfoque de equidad territorial, proponiendo lineamientos que contribuyan al dise√±o de pol√≠ticas p√∫blicas orientadas a reducir la brecha digital y promover una planificaci√≥n tecnol√≥gica m√°s inclusiva en el espacio metropolitano.

Este trabajo de dividir√° en Metodolog√≠a, Resultados, An√°lisis, Conclusi√≥n y Bibliograf√≠a.

------------------------------------------------------------------------

# 2. Desarrollo

## 2.1. Metodolog√≠a

Para el desarrollo metodol√≥gico de este trabajo se utilizaron dos herramientas principales: **pgAdmin** y **RStudio**, con el objetivo de integrar, procesar y visualizar informaci√≥n proveniente de la **Encuesta CASEN 2017** y del **Censo de Poblaci√≥n y Vivienda 2017**.  
El an√°lisis se concentr√≥ en las **zonas urbanas de la Provincia de Santiago**, en la **Regi√≥n Metropolitana de Santiago**, tomando como unidad territorial la **zona censal urbana**, lo que permiti√≥ observar diferencias intra-comunales en los niveles de conectividad digital.

El objetivo metodol√≥gico fue **estimar y representar territorialmente el acceso a Internet por banda ancha m√≥vil**, considerado un indicador clave de inclusi√≥n digital.  
Para ello, se llevaron a cabo las siguientes etapas:

1. **Integraci√≥n y preprocesamiento de datos:**  
   Se importaron los datos de la CASEN y del Censo en formato `.rds`, seleccionando variables comunes como edad, sexo, nivel educativo y acceso a Internet m√≥vil (`r17b`).  
   Se realiz√≥ una imputaci√≥n lineal de valores faltantes y una recodificaci√≥n binaria (`r17b_bin`) para representar hogares con y sin acceso a banda ancha m√≥vil.

2. **Microsimulaci√≥n de acceso a Internet:**  
   Mediante el paquete `rakeR` en **RStudio**, se ajustaron las distribuciones de la CASEN a las estructuras poblacionales del Censo.  
   Este proceso permiti√≥ estimar el **porcentaje de hogares con acceso a Internet m√≥vil** por zona censal (`porc_bamovil`), generando una base sint√©tica coherente con la realidad demogr√°fica.

3. **Procesamiento espacial y conexi√≥n a base de datos:**  
   Los resultados fueron integrados en una base **PostgreSQL/PostGIS** mediante `RPostgres` y `DBI`, donde se asociaron con las geometr√≠as censales urbanas del **Gran Santiago**.  
   Luego, se agruparon los resultados a nivel comunal, calculando los promedios de conectividad.

4. **Visualizaci√≥n cartogr√°fica:**  
   Finalmente, se elabor√≥ un **mapa tem√°tico** en `ggplot2` que representa la proporci√≥n de hogares con acceso a Internet m√≥vil en las comunas del Gran Santiago.  
   Cada tonalidad refleja el nivel relativo de conectividad, permitiendo identificar las desigualdades territoriales en el acceso digital.

Se combinaron herramientas de an√°lisis estad√≠stico, microsimulaci√≥n y representaci√≥n geoespacial para evidenciar la **brecha digital metropolitana**, aportando una base emp√≠rica para el diagn√≥stico de desigualdades territoriales en materia de conectividad.


### **2.1.1. Librer√≠as necesarias**

Para desarrollar el an√°lisis en R se cargaron las siguiente librer√≠as:

```{r librerias, echo=TRUE, message=FALSE, warning=FALSE}
library(rakeR)
library(RPostgres)
library(DBI)
library(sf)
library(dplyr)
library(data.table)
library(ggplot2)
library(ggrepel)
library(stringr)
library(cowplot)
```
En conjunto, estas librer√≠as posibilitaron la integraci√≥n de herramientas estad√≠sticas, espaciales y gr√°ficas, construyendo un flujo metodol√≥gico reproducible para el an√°lisis de la **brecha digital en el Gran Santiago**.

### **2.1.2.1 Carga de datos CASEN y Censo**

Para ejecutar el proceso de microsimulaci√≥n, se cargaron los archivos `.rds` correspondientes a la **Encuesta CASEN 2017** y al **Censo 2017**, almacenados localmente.  
Ambos conjuntos de datos fueron preprocesados para garantizar la compatibilidad entre las variables demogr√°ficas y geogr√°ficas requeridas en el modelo.



### **2.1.2. Conexi√≥n a la base de datos PostgreSQL**

Se estableci√≥ una conexi√≥n con una base de datos local en PostgreSQL que contiene las tablas del Censo 2017 para la Regi√≥n Metropolitana.


### **2.1.2.1 Carga de datos CASEN y Censo**

Se cargaron los archivos `.rds` correspondientes a la **Encuesta CASEN 2017** y al **Censo 2017**, almacenados localmente.  
Ambos conjuntos de datos fueron preprocesados para garantizar la compatibilidad entre las variables demogr√°ficas y geogr√°ficas requeridas en el modelo.

```{r carga_datos, message=FALSE, warning=FALSE}
## ============================================================
## 2. CARGA DE DATOS ####
## ============================================================

# Rutas de los archivos CASEN y CENSO
ruta_casen <- "C:/Users/Kurta/Desktop/Universidad/Geomarketing/Trabajo 2/casen_rm (1).rds"
ruta_censo <- "C:/Users/Kurta/Desktop/Universidad/Geomarketing/Trabajo 2/cons_censo_df (1).rds"

# Cargar bases de datos
casen <- readRDS(ruta_casen)
cons_censo_df <- readRDS(ruta_censo)

# Verificar dimensiones b√°sicas
dim(casen)
dim(cons_censo_df)
```

```{r}
con = dbConnect(
  RPostgres::Postgres(),
  dbname   = "censo2017_rm",
  host     = "localhost",
  port     = 5432,
  user     = "postgres",
  password = "Kurt12345*"
)
```



-   `sexo`: Sexo del individuo (1 = Hombre, 2 = Mujer).  
-   `edad`: Edad del individuo en a√±os cumplidos.  
-   `esc`: A√±os de escolaridad aprobados.  
-   `e6a`: Nivel educativo m√°s alto alcanzado, utilizada como variable auxiliar para imputaci√≥n de valores faltantes en `esc`.  
-   `r17b`: Indicador de acceso a Internet mediante banda ancha m√≥vil (1 = S√≠, 2 = No).  
-   `estrato`: Identificador geogr√°fico de la CASEN que permite vincular las observaciones con las comunas del Censo 2017.

Para los hogares que **s√≠ disponen de conexi√≥n a Internet m√≥vil**, se aplic√≥ el siguiente filtro:

$r17b = 1$

Que posteriormente se registr√≥ como valor `1` en la variable **‚ÄúAcceso a Internet m√≥vil‚Äù** (`r17b_bin = 1`).

Para los hogares que **no disponen de conexi√≥n a Internet m√≥vil**, el filtro fue:

$r17b = 2$

Que se registr√≥ como valor `0` en la variable **‚ÄúSin acceso a Internet m√≥vil‚Äù** (`r17b_bin = 0`).

A partir de estas variables, y mediante un proceso de microsimulaci√≥n, se estim√≥ el **porcentaje promedio de hogares con acceso a banda ancha m√≥vil** en cada zona censal (`porc_bamovil`), el cual fue luego agregado a nivel comunal.

La tabla resultante generada en R contiene los siguientes campos por zona censal:

| Variable | Descripci√≥n |
|----|----|
| `geocodigo` | C√≥digo √∫nico de identificaci√≥n de la zona censal (clave espacial). |
| `nom_comuna` | Nombre de la comuna a la que pertenece la zona censal. |
| `r17b_bin` | Variable binaria que indica si el hogar posee acceso a Internet m√≥vil (1 = S√≠, 0 = No). |
| `porc_bamovil` | Porcentaje de hogares con acceso a Internet por banda ancha m√≥vil estimado a partir de la microsimulaci√≥n. |

### **2.1.2.3 Microsimulaci√≥n de acceso a Internet**

A continuaci√≥n, se ejecut√≥ el proceso de **microsimulaci√≥n**, mediante el cual se ajustaron las distribuciones de la encuesta **CASEN 2017** a las estructuras poblacionales del **Censo 2017**, permitiendo estimar el porcentaje de hogares con acceso a Internet por banda ancha m√≥vil (`porc_bamovil`) en cada zona censal.  
Este procedimiento se realiz√≥ con el paquete `rakeR`, el cual pondera los individuos encuestados en funci√≥n de las variables demogr√°ficas seleccionadas (edad, educaci√≥n y sexo), generando una base sint√©tica coherente con la poblaci√≥n censal.


```{r}
## ============================================================
## 3. PREPROCESAMIENTO ####
## ============================================================

# Crear variable comuna a partir del estrato CASEN
casen$Comuna <- substr(as.character(casen$estrato), 1, 5)

# Limpieza previa de la columna Comuna
casen <- casen[!is.na(casen$Comuna) & casen$Comuna != "", ]
casen$Comuna <- stringr::str_pad(as.character(casen$Comuna), width = 5, pad = "0")
cons_censo_df$COMUNA <- stringr::str_pad(as.character(cons_censo_df$COMUNA), width = 5, pad = "0")
## ============================================================
## 3.1 CREACI√ìN DE VARIABLES EN CASEN ####
## ============================================================

# Asegurar que el paquete haven est√© cargado
library(haven)

# Eliminar etiquetas de tipo <haven_labelled>
casen <- haven::zap_labels(casen)

# Convertir variables a num√©ricas simples
casen$r17b <- as.numeric(casen$r17b)
casen$edad <- as.numeric(casen$edad)
casen$esc  <- as.numeric(casen$esc)
casen$sexo <- as.numeric(casen$sexo)

# Crear ID √∫nica para cada registro
casen$ID <- as.character(seq_len(nrow(casen)))

# Variable binaria: 1 = acceso a internet m√≥vil (r17b = 1), 0 = no acceso (r17b = 2)
casen$r17b_bin <- ifelse(casen$r17b == 1, 1L,
                         ifelse(casen$r17b == 2, 0L, NA_integer_))

# Categorizaci√≥n por edad
casen$edad_cat <- cut(
  casen$edad,
  breaks = c(0, 30, 40, 50, 60, 70, 80, Inf),
  labels = c("0-29", "30-39", "40-49", "50-59", "60-69", "70-79", "80+"),
  right = FALSE, include.lowest = TRUE
)

# Categorizaci√≥n por educaci√≥n
casen$esc_cat <- cut(
  casen$esc,
  breaks = c(-Inf, 8, 12, 16, Inf),
  labels = c("B√°sica o menos", "Media", "T√©cnica", "Superior"),
  right = TRUE
)

# Categorizaci√≥n por sexo
casen$sexo_cat <- factor(
  ifelse(casen$sexo == 2, "Mujer",
         ifelse(casen$sexo == 1, "Hombre", NA)),
  levels = c("Mujer", "Hombre")
)


# Separar los datos del Censo y de la CASEN por comuna
cons_censo_comunas = split(cons_censo_df, cons_censo_df$COMUNA)
inds_list = split(casen, casen$Comuna)



```


```{r}
## ============================================================
## 4. MICROSIMULACI√ìN (ROBUSTA Y SIN NULOS) ####
## ============================================================

# Comprobaci√≥n de columnas necesarias
cols_necesarias <- c("ID", "edad_cat", "esc_cat", "sexo_cat", "r17b_bin")
if (!all(cols_necesarias %in% names(casen))) {
  stop("Faltan variables necesarias en CASEN: ",
       paste(setdiff(cols_necesarias, names(casen)), collapse = ", "))
}

# Asegurar formato de c√≥digos comunales en ambas bases
casen$Comuna <- str_pad(as.character(casen$Comuna), 5, pad = "0")
cons_censo_df$COMUNA <- str_pad(as.character(cons_censo_df$COMUNA), 5, pad = "0")

# Filtrar filas v√°lidas (sin NA en variables claves)
casen <- casen %>%
  filter(!is.na(edad_cat), !is.na(esc_cat), !is.na(sexo_cat), !is.na(r17b_bin))

# Separar los datos del Censo y de la CASEN por comuna
cons_censo_comunas <- split(cons_censo_df, cons_censo_df$COMUNA)
inds_list <- split(casen, casen$Comuna)

# Crear lista de simulaciones por comuna (ignorando las fallidas)
sim_list <- lapply(names(cons_censo_comunas), function(zona) {
  cons_i <- cons_censo_comunas[[zona]]
  if (!zona %in% names(inds_list)) return(NULL)

  tmp <- inds_list[[zona]]
  tmp <- tmp %>% filter(!is.na(r17b_bin))  # eliminar NA en la variable de inter√©s

  if (nrow(tmp) == 0) return(NULL)

  inds_i <- tmp[, c("ID", "edad_cat", "esc_cat", "sexo_cat"), drop = FALSE]
  names(inds_i) <- c("ID", "Edad", "Escolaridad", "Sexo")

  # Intentar ejecutar la microsimulaci√≥n
  out <- try({
    w_frac <- weight(cons = cons_i, inds = inds_i,
                     vars = c("Edad", "Escolaridad", "Sexo"))
    sim_i <- integerise(weights = w_frac, inds = inds_i, seed = 123)
    merge(sim_i, tmp[, c("ID", "r17b_bin")], by = "ID", all.x = TRUE)
  }, silent = TRUE)

  # Si falla, devolver NULL y continuar
  if (inherits(out, "try-error") || is.null(out)) return(NULL)
  if (!"r17b_bin" %in% names(out)) return(NULL)

  out
})

# Filtrar simulaciones v√°lidas y eliminar nulos
sim_list <- Filter(Negate(is.null), sim_list)

# Si no hay ninguna, lanzar advertencia pero no detener el knit
if (length(sim_list) == 0) {
  warning("‚ö†Ô∏è No se gener√≥ ninguna simulaci√≥n v√°lida. Revisa comunas con datos insuficientes.")
  sim_df <- data.frame(COMUNA = character(), r17b_bin = numeric())
} else {
  sim_df <- data.table::rbindlist(sim_list, idcol = "COMUNA")
}

# Verificaci√≥n
cat("‚úÖ Simulaci√≥n completada. Comunas v√°lidas:", length(unique(sim_df$COMUNA)), "\n")
print(head(sim_df))


```

```{r}
## ============================================================
## 4.1 C√ÅLCULO DE PORCENTAJE DE ACCESO A INTERNET (ROBUSTO) ####
## ============================================================

if (exists("sim_df") && nrow(sim_df) > 0 && "r17b_bin" %in% names(sim_df)) {

  # Eliminar posibles NA en r17b_bin antes de agregar
  sim_df <- sim_df[!is.na(sim_df$r17b_bin), ]

  # Verificar que existan comunas v√°lidas
  if (nrow(sim_df) > 0) {
    zonas_internet <- aggregate(
      r17b_bin ~ COMUNA,
      data = sim_df,
      FUN  = function(x) mean(x, na.rm = TRUE) * 100
    )

    # Renombrar columnas
    names(zonas_internet) <- c("geocodigo", "porc_bamovil")

    cat("‚úÖ C√°lculo completado. Comunas procesadas:", nrow(zonas_internet), "\n")
    print(head(zonas_internet))

  } else {
    warning("‚ö†Ô∏è No hay registros v√°lidos en sim_df tras eliminar NAs. Creando tabla vac√≠a.")
    zonas_internet <- data.frame(geocodigo = character(), porc_bamovil = numeric())
  }

} else {
  warning("‚ö†Ô∏è sim_df no existe o no contiene la variable 'r17b_bin'. Creando tabla vac√≠a.")
  zonas_internet <- data.frame(geocodigo = character(), porc_bamovil = numeric())
}


```





Posteriormente, se estableci√≥ una conexi√≥n con la base de datos **PostgreSQL**, la cual contiene las geometr√≠as censales urbanas del **Gran Santiago**.  
El prop√≥sito de esta conexi√≥n fue asociar los resultados de la microsimulaci√≥n con la informaci√≥n espacial de las zonas censales.


```{r conexion y geometria, message=FALSE, warning=FALSE, include=FALSE}
# 5) CONEXI√ìN A BASE DE DATOS Y EXTRACCI√ìN DE GEOMETR√çAS
# =============================================================================
con = dbConnect(
  RPostgres::Postgres(),
  dbname   = "censo2017_rm",
  host     = "localhost",
  port     = 5432,
  user     = "postgres",
  password = "Kurt12345*"
)

# Guardar tabla temporal con resultados
DBI::dbWriteTable(
  con,
  name = DBI::SQL("output.zonas_internet_tmp"),
  value = zonas_internet,
  row.names = FALSE,
  overwrite = TRUE
)

# Consultar geometr√≠as de zonas urbanas en la provincia de Santiago
query_gs = "
SELECT *
FROM dpa.zonas_censales_rm
WHERE urbano = 1 AND (
    nom_provin = 'SANTIAGO' OR
    nom_comuna IN ('PUENTE ALTO', 'SAN BERNARDO')
)"
zonas_gs = sf::st_read(con, query = query_gs, quiet = TRUE)




```


Posteriormente, se integraron los datos censales previamente procesados con la geometr√≠a espacial, generando as√≠ una tabla espacial final lista para su visualizaci√≥n.
se realiz√≥ la integraci√≥n entre los datos de conectividad y las geometr√≠as espaciales, creando una capa final que permite la visualizaci√≥n cartogr√°fica del indicador.

La construcci√≥n del indicador de **acceso a Internet m√≥vil** se bas√≥ en la integraci√≥n de los datos del **Censo 2017** y la **Encuesta CASEN**, procesados mediante microsimulaci√≥n para estimar el porcentaje de hogares con conectividad efectiva en cada zona censal. 

Este enfoque permite obtener una estimaci√≥n espacialmente coherente de la **brecha digital**, considerando tanto las caracter√≠sticas sociodemogr√°ficas (edad, educaci√≥n y sexo) como la estructura territorial del Gran Santiago.

La tabla espacial resultante asocia a cada zona censal su respectivo porcentaje de acceso (`porc_bamovil`), permitiendo su representaci√≥n cartogr√°fica y el an√°lisis comparativo entre comunas urbanas de la Regi√≥n Metropolitana.

### 2.1.3. Indicadores

El indicador principal de este estudio corresponde al **porcentaje de acceso a Internet por banda ancha m√≥vil**, obtenido a partir de la integraci√≥n de los datos del **Censo 2017** y la **Encuesta CASEN** mediante t√©cnicas de **microsimulaci√≥n**.  
Este indicador busca representar la proporci√≥n de hogares efectivamente conectados a Internet m√≥vil dentro de cada zona censal, permitiendo caracterizar las desigualdades territoriales en el acceso digital.

El c√°lculo del porcentaje de acceso (*A*) se expresa mediante la siguiente f√≥rmula:
$$
A = \left( \frac{\text{Viviendas con conexi√≥n a Internet m√≥vil (r17b = 1)}}{\text{Total de viviendas censadas}} \right) \times 100
$$

Donde:

-   *A*: Porcentaje de acceso a Internet m√≥vil en la zona censal o comuna.  
-   *r17b = 1*: Viviendas que declararon disponer de conexi√≥n a Internet por banda ancha m√≥vil seg√∫n el Censo 2017.  
-   *r17b = 2*: Viviendas que no disponen de conexi√≥n a Internet m√≥vil.  

A partir de esta variable, se construy√≥ una variable binaria `r17b_bin`, que adopta el valor:

-   `1` cuando el hogar tiene conexi√≥n a Internet m√≥vil.  
-   `0` cuando el hogar no posee conexi√≥n a Internet m√≥vil.  

Esta recodificaci√≥n permiti√≥ calcular el promedio de acceso dentro de cada zona censal, generando el indicador `porc_bamovil`, el cual expresa el **porcentaje de hogares conectados** y constituye la base del an√°lisis espacial.

Adicionalmente, durante el proceso de microsimulaci√≥n, se consideraron variables sociodemogr√°ficas de la CASEN, tales como **edad (`edad`)**, **nivel educativo (`esc`)** y **sexo (`sexo`)**, para ajustar la estructura poblacional del Censo y estimar de manera m√°s precisa la distribuci√≥n del acceso digital.

| Naturaleza del √≠ndice *A* | Descripci√≥n |
|----|----|
| *A* < 50% | Menos de la mitad de los hogares posee acceso a Internet m√≥vil (alta brecha digital). |
| *A* = 50‚Äì80% | Nivel medio de conectividad, con desigualdades internas significativas. |
| *A* > 80% | Mayor√≠a de los hogares conectados a Internet m√≥vil (baja brecha digital). |

Este indicador constituye una medida sint√©tica de inclusi√≥n tecnol√≥gica territorial, permitiendo identificar zonas con alta exclusi√≥n digital y orientar pol√≠ticas p√∫blicas hacia una **equidad digital metropolitana.

---

### 2.1.4. Visualizaci√≥n

Se generaron tres productos visuales para el an√°lisis:

**Mapa comunal de acceso a Internet m√≥vil**: representa la proporci√≥n de hogares conectados en cada comuna del Gran Santiago, destacando los contrastes espaciales entre el sector oriente y las periferias sur y poniente.  
2.  **Leyenda ordenada**: muestra de forma jer√°rquica las comunas desde el mayor al menor nivel de conectividad, facilitando la interpretaci√≥n comparativa del indicador `porc_bamovil`.  

En conjunto, estos productos permiten **visualizar la distribuci√≥n espacial de la brecha digital** en el Gran Santiago, evidenciando c√≥mo las condiciones de conectividad digital reflejan las desigualdades estructurales del territorio metropolitano.


```{r}
## ============================================================
## 5. MAPA DE ACCESO A INTERNET M√ìVIL (COMPATIBLE) ####
## ============================================================

library(ggplot2)
library(sf)
library(dplyr)
library(cowplot)
library(ggrepel)

# Validaci√≥n de existencia de tablas
if (!exists("zonas_gs") || !exists("zonas_internet")) {
  stop("Faltan datos para generar el mapa. Verifica zonas_gs y zonas_internet.")
}

# üîπ Forzar tipo de dato a texto para unir correctamente
zonas_gs$geocodigo <- as.character(zonas_gs$geocodigo)
zonas_internet$geocodigo <- as.character(zonas_internet$geocodigo)

# Detectar el nombre de la columna de geometr√≠a (a veces es geom o wkb_geometry)
nombre_geom <- attr(zonas_gs, "sf_column")
if (is.null(nombre_geom)) {
  posibles_geom <- intersect(names(zonas_gs), c("geometry", "geom", "wkb_geometry", "Shape"))
  if (length(posibles_geom) == 0) stop(" No se encontr√≥ ninguna columna de geometr√≠a en zonas_gs.")
  nombre_geom <- posibles_geom[1]
  message("üß≠ Se detect√≥ columna de geometr√≠a: ", nombre_geom)
}

# Si la geometr√≠a no se llama 'geometry', renombrarla
if (nombre_geom != "geometry") {
  zonas_gs <- zonas_gs %>%
    dplyr::rename(geometry = !!sym(nombre_geom)) %>%
    sf::st_as_sf()
}

# üîπ Uni√≥n espacial ‚Äî asegurando que se mantiene la geometr√≠a SF
zonas_gs_final <- zonas_gs %>%
  dplyr::left_join(zonas_internet, by = "geocodigo") %>%
  sf::st_as_sf()

# Verificar que tiene geometr√≠a
if (!inherits(zonas_gs_final, "sf")) {
  stop("l objeto zonas_gs_final no tiene geometr√≠a. Revisa la capa cargada desde PostgreSQL.")
}

# üîπ Crear dataset de centroides por comuna (agrupando correctamente)
centroides_comunas <- zonas_gs_final %>%
  dplyr::group_by(nom_comuna) %>%
  dplyr::summarise(geometry = sf::st_union(geometry), .groups = "drop") %>%
  dplyr::mutate(
    centroid = sf::st_centroid(geometry),
    lon = sf::st_coordinates(centroid)[, 1],
    lat = sf::st_coordinates(centroid)[, 2]
  )



# Crear mapa base
mapa_comunas <- ggplot() +
  geom_sf(data = zonas_gs_final,
          aes(fill = porc_bamovil),
          color = "white", size = 0.2) +
  scale_fill_gradient(
    name = "Porcentaje de acceso a Internet\nBanda Ancha M√≥vil (%)",
    low = "#fee8c8", high = "#8c2d04", na.value = "grey90"
  ) +
  labs(
    title = "Acceso a Internet por Banda Ancha M√≥vil en el Gran Santiago",
    subtitle = "Estimaci√≥n mediante microsimulaci√≥n (CASEN 2017 + Censo 2017)",
    caption = "Fuente: Elaboraci√≥n propia a partir de CASEN y Censo 2017."
  ) +
  theme_minimal() +
  theme(
    plot.title = element_text(size = 14, face = "bold"),
    plot.subtitle = element_text(size = 10),
    axis.text = element_blank(),
    axis.title = element_blank(),
    panel.grid = element_blank(),
    legend.position = "bottom"
  )

# üîπ Agregar etiquetas seg√∫n versi√≥n de ggrepel disponible
if ("geom_sf_text_repel" %in% getNamespaceExports("ggrepel")) {
  # Versi√≥n moderna de ggrepel
  mapa_comunas <- mapa_comunas +
    ggrepel::geom_sf_text_repel(
      data = centroides_comunas,
      aes(label = nom_comuna),
      size = 2.5, color = "black"
    )
} else {
  # Versi√≥n compatible (usando coordenadas X/Y)
  mapa_comunas <- mapa_comunas +
    ggrepel::geom_text_repel(
      data = centroides_comunas,
      aes(x = lon, y = lat, label = nom_comuna),
      size = 2.5, color = "black"
    )
}

# Crear leyenda separada
leyenda <- get_legend(
  mapa_comunas +
    theme(
      legend.position = "bottom",
      legend.title = element_text(size = 9),
      legend.text = element_text(size = 8)
    )
)

cat(" Mapa y leyenda creados correctamente.\n")

```

------------------------------------------------------------------------

## 2.2 An√°lisis y Resultados

Del procesamiento conjunto de las bases de datos del **Censo 2017** y la Encuesta CASEN, empleando t√©cnicas de microsimulaci√≥n en RStudio y consultas espaciales desde pgAdmin/PostgreSQL, se obtuvo el siguiente mapa tem√°tico, que muestra la distribuci√≥n del acceso a Internet por Banda Ancha M√≥vil en las comunas del Gran Santiago.


## 2.2 An√°lisis y Resultados

Del procesamiento conjunto de las bases de datos del **Censo 2017** y la **Encuesta CASEN**, utilizando t√©cnicas de **microsimulaci√≥n** en **RStudio** y consultas espaciales desde **pgAdmin/PostgreSQL**, se gener√≥ un indicador del **porcentaje de acceso a Internet por Banda Ancha M√≥vil** (`porc_bamovil`).  
Este indicador expresa la proporci√≥n de hogares conectados a Internet m√≥vil dentro de cada comuna del **Gran Santiago**, lo que permite identificar la magnitud y distribuci√≥n territorial de la **brecha digital**.

A continuaci√≥n, se presenta el mapa comunal resultante junto con su respectiva leyenda.

## 2.2 An√°lisis y Resultados

Del procesamiento conjunto de las bases de datos del **Censo 2017** y la **Encuesta CASEN**, utilizando t√©cnicas de **microsimulaci√≥n** en **RStudio** y consultas espaciales desde **pgAdmin/PostgreSQL**, se gener√≥ un indicador del **porcentaje de acceso a Internet por Banda Ancha M√≥vil** (`porc_bamovil`).  
Este indicador expresa la proporci√≥n de hogares conectados a Internet m√≥vil dentro de cada comuna del **Gran Santiago**, lo que permite identificar la magnitud y distribuci√≥n territorial de la **brecha digital**.

A continuaci√≥n, se presenta el mapa comunal resultante junto con su respectiva leyenda.

```{r mapa_bamovil, echo=TRUE, fig.cap="Mapa 1. Acceso a Internet por Banda Ancha M√≥vil en comunas del Gran Santiago.", message=FALSE, warning=FALSE}
# Mapa principal
mapa_comunas
grid::grid.newpage()
grid::grid.draw(leyenda)
```

El mapa anterior representa la distribuci√≥n espacial del acceso digital en las comunas del Gran Santiago.
Cada color identifica una comuna distinta seg√∫n su porcentaje promedio de hogares con acceso a Internet m√≥vil, mientras que la leyenda detalla los valores espec√≠ficos ordenados de mayor a menor conectividad.

Se observa una marcada desigualdad territorial en la distribuci√≥n del acceso.
Las comunas con mayor conectividad digital corresponden a Quinta Normal (74,1%), Providencia (68,2%), La Reina (67,1%), La Pintana (66,4%), Independencia (64,5%) y Macul (62,8%), todas superando el promedio regional.
Estas zonas concentran infraestructura tecnol√≥gica consolidada, mayores niveles educativos y mejores condiciones socioecon√≥micas, lo que favorece la adopci√≥n de servicios digitales.

En contraste, las comunas de la periferia sur y poniente evidencian niveles cr√≠ticos de acceso.
Cerrillos (17,8%), La Granja (25,2%), El Bosque (24,7%), La Cisterna (26,3%), San Ram√≥n (34,3%) y Lo Espejo (37%) presentan los valores m√°s bajos del √°rea metropolitana, reflejando una brecha digital estructural asociada a menores ingresos, alta densidad habitacional y escasa inversi√≥n en redes de telecomunicaci√≥n.

La diferencia entre los extremos del espectro ‚ÄîQuinta Normal (74,1%) y Cerrillos (17,8%)‚Äî equivale a m√°s de 56 puntos porcentuales, lo que evidencia una polarizaci√≥n digital profunda entre comunas del mismo espacio urbano.
Este patr√≥n reafirma la existencia de un gradiente digital oriente‚Äìponiente, donde el acceso a la tecnolog√≠a y la conectividad est√°n estrechamente vinculados con la segregaci√≥n socioecon√≥mica y urbana.

En t√©rminos espaciales, la zona oriente y parte del centro-norte presentan mayores niveles de acceso, mientras que los sectores surponiente concentran los valores m√°s bajos.
Este comportamiento se asocia tanto a la capacidad adquisitiva de los hogares como a la disponibilidad de infraestructura tecnol√≥gica, configurando una geograf√≠a desigual de oportunidades digitales.

Finalmente, los resultados muestran que m√°s del 40% de las comunas del Gran Santiago se encuentran por debajo del umbral del 55% de acceso, lo que sugiere una vulnerabilidad digital significativa.
Estas diferencias implican que amplios sectores de la poblaci√≥n urbana permanecen excluidos de la conectividad plena, limitando su acceso a informaci√≥n, educaci√≥n, servicios y participaci√≥n social.

En s√≠ntesis, este an√°lisis evidencia c√≥mo la brecha digital se manifiesta como una nueva forma de desigualdad urbana, donde el acceso a Internet no solo depende de la infraestructura disponible, sino tambi√©n de las condiciones estructurales del territorio.
El mapa constituye una herramienta clave para la identificaci√≥n de territorios prioritarios en pol√≠ticas p√∫blicas de inclusi√≥n digital, desarrollo urbano y equidad tecnol√≥gica.

Las comunas del Gran Santiago fueron clasificadas seg√∫n su **porcentaje de hogares con acceso a Internet por Banda Ancha M√≥vil (BAM√≥vil)**, lo que permite identificar distintos niveles de **inclusi√≥n y exclusi√≥n digital** en el territorio metropolitano.  
A partir de los resultados obtenidos, se distinguieron tres grandes categor√≠as de conectividad: **alta**, **media** y **baja**, que reflejan la magnitud de la brecha digital urbana y su estrecha relaci√≥n con los patrones de segregaci√≥n socioespacial.

Los principales hallazgos territoriales evidencian **zonas con alta vulnerabilidad digital** (clase 1, color amarillo claro en el mapa).  
Estas comunas concentran **los menores porcentajes de acceso a Internet m√≥vil**, reflejando una combinaci√≥n de **baja inversi√≥n en infraestructura, alta densidad habitacional y limitaciones econ√≥micas de los hogares**.  
Se localizan principalmente en el **sur y poniente del Gran Santiago**, destacando:

-   **Cerrillos (17,8%)**
-   **El Bosque (24,7%)**
-   **La Granja (25,2%)**
-   **San Ram√≥n (34,3%)**
-   **La Cisterna (26,3%)**
-   **Lo Espejo (37%)**

Estos territorios presentan una exclusi√≥n digital estructural, donde la conectividad deficiente se suma a otras formas de desigualdad social y urbana.  
En ellos, la falta de acceso a Internet limita la participaci√≥n en actividades educativas, laborales y c√≠vicas, profundizando el rezago de sus habitantes respecto a comunas con mayor desarrollo tecnol√≥gico.

En el otro extremo, se identifican comunas con alta conectividad digital (clase 3, colores violeta y azul oscuro en el mapa), que superan el 65% de hogares con acceso.  
Se concentran en el sector nororiente y centro consolidado de la ciudad, e incluyen:

-   **Quinta Normal (74,1%)**
-   **Providencia (68,2%)**
-   **La Reina (67,1%)**
-   **La Pintana (66,4%)**
-   **Macul (62,8%)**
-   **Las Condes (61,9%)**

Estas comunas reflejan mayores niveles educativos, ingresos estables y densidad de infraestructura tecnol√≥gica, lo que posibilita una conectividad de mejor calidad.  
En ellas, el acceso a Internet m√≥vil se percibe como un servicio b√°sico cotidiano, reforzando la inserci√≥n digital de sus habitantes y su participaci√≥n en entornos digitales avanzados.

Entre ambos extremos se encuentran zonas de conectividad intermedia (clase 2, tonos rosados del mapa), donde los porcentajes oscilan entre el **45% y el 60%**.  
Estas comunas ‚Äîcomo **San Bernardo, Maip√∫, Puente Alto, √ëu√±oa, Renca y Huechuraba**‚Äî representan territorios de transici√≥n, donde coexisten sectores con buena conectividad junto a otros con d√©ficits puntuales.  
En general, presentan una estructura urbana heterog√©nea, caracterizada por crecimiento perif√©rico acelerado y servicios de telecomunicaci√≥n desiguales entre barrios.

El an√°lisis espacial revela un gradiente digital oriente‚Äìponiente en la ciudad, coherente con las din√°micas hist√≥ricas de segregaci√≥n socioecon√≥mica y urbana.  
Las comunas con mayor conectividad tienden a concentrarse en el eje oriente y centro, mientras que las m√°s rezagadas se ubican en el eje sur y poniente, donde las condiciones de vulnerabilidad estructural son m√°s pronunciadas.

El mapa evidencia una **brecha digital persistente y territorialmente estructurada** en el Gran Santiago.  
Los resultados permiten identificar **bolsones de exclusi√≥n digital** que requieren intervenciones focalizadas, con un enfoque que combine **infraestructura tecnol√≥gica, alfabetizaci√≥n digital y pol√≠ticas p√∫blicas locales**.  
En este sentido, la conectividad deja de ser un privilegio y se reafirma como un **derecho social fundamental**, indispensable para reducir las desigualdades urbanas y avanzar hacia una ciudad digitalmente inclusiva.

------------------------------------------------------------------------



## 3. Conclusiones

El presente estudio permiti√≥ evidenciar las profundas **desigualdades territoriales en el acceso a Internet por Banda Ancha M√≥vil (BAM√≥vil)** en la Regi√≥n Metropolitana de Santiago, revelando que la brecha digital no es un fen√≥meno meramente tecnol√≥gico, sino estructural y socialmente determinado.  
A partir de la integraci√≥n de la **Encuesta CASEN 2017** y el **Censo de Poblaci√≥n y Vivienda 2017**, se logr√≥ estimar y representar espacialmente el nivel de conectividad digital de los hogares urbanos, configurando una base emp√≠rica s√≥lida para comprender la dimensi√≥n territorial de la exclusi√≥n digital en el espacio metropolitano.

Los resultados obtenidos muestran una **marcada polarizaci√≥n espacial** en la distribuci√≥n de la conectividad: mientras las comunas del **sector oriente** ‚Äîcomo **Las Condes, La Reina, Providencia y √ëu√±oa**‚Äî presentan altos niveles de acceso a Internet m√≥vil, las comunas del **sector sur y poniente** ‚Äîentre ellas **La Pintana, El Bosque, Lo Espejo y San Ram√≥n**‚Äî exhiben porcentajes considerablemente m√°s bajos.  
Este patr√≥n evidencia un **gradiente oriente‚Äìponiente** hist√≥ricamente persistente, donde la infraestructura digital, al igual que otros servicios urbanos, se distribuye de manera desigual siguiendo las l√≠neas socioecon√≥micas de la ciudad.  
En consecuencia, la brecha digital act√∫a como una extensi√≥n de la **segregaci√≥n socioespacial**, reproduciendo las desigualdades de acceso a la educaci√≥n, el trabajo y la informaci√≥n.

La aplicaci√≥n de **t√©cnicas de microsimulaci√≥n** permiti√≥ ajustar la informaci√≥n proveniente de la CASEN a los totales poblacionales del Censo, generando un modelo sint√©tico de estimaci√≥n territorial del acceso a Internet.  
Esta aproximaci√≥n metodol√≥gica demostr√≥ ser una herramienta eficaz para el an√°lisis espacial de fen√≥menos sociales y tecnol√≥gicos, proporcionando una lectura detallada de la conectividad a nivel de comuna y zona urbana.  
A trav√©s de la representaci√≥n cartogr√°fica se pudo visualizar de manera clara la **desigual distribuci√≥n de la inclusi√≥n digital**, permitiendo identificar √°reas cr√≠ticas con mayores d√©ficits de acceso.

El an√°lisis territorial confirma que la **brecha digital refuerza la exclusi√≥n social y econ√≥mica**, afectando principalmente a los hogares ubicados en zonas de menor ingreso, alta densidad poblacional y baja infraestructura tecnol√≥gica.  
En estas comunas, las limitaciones de conectividad impactan directamente en la capacidad de sus habitantes para acceder a servicios esenciales, tales como educaci√≥n en l√≠nea, teletrabajo, participaci√≥n ciudadana o tr√°mites digitales.  
La falta de acceso a Internet no solo restringe la inserci√≥n en la sociedad digital contempor√°nea, sino que tambi√©n profundiza la **vulnerabilidad estructural** de comunidades que ya enfrentan d√©ficits en materia de vivienda, transporte y servicios b√°sicos.

En este contexto, resulta pertinente destacar el **Plan Brecha Digital Cero (SUBTEL, 2022‚Äì2025)**, cuyo objetivo es garantizar que todos los habitantes del pa√≠s tengan acceso a Internet independiente de su ubicaci√≥n geogr√°fica o condici√≥n econ√≥mica.  
Esta pol√≠tica se sustenta en cuatro ejes estrat√©gicos: **Regulaci√≥n para la conectividad**, **Infraestructura digital**, **Proyectos de ley** y **Conectividad para todos**, los cuales buscan reducir las asimetr√≠as en el acceso y promover la equidad tecnol√≥gica a escala nacional.  
La implementaci√≥n de este tipo de iniciativas resulta crucial para abordar la desigualdad observada en territorios metropolitanos como Santiago, donde la conectividad se ha convertido en un factor determinante de **inclusi√≥n social y desarrollo humano**.

Asimismo, el reconocimiento del **acceso a Internet como un derecho social b√°sico** plantea un desaf√≠o para la gesti√≥n p√∫blica y la planificaci√≥n urbana.  
Garantizar la conectividad no solo implica ampliar la infraestructura tecnol√≥gica, sino tambi√©n fortalecer la **alfabetizaci√≥n digital**, la participaci√≥n comunitaria y la articulaci√≥n con los gobiernos locales.  
El trabajo conjunto entre el Estado, los municipios y la ciudadan√≠a ser√° fundamental para reducir las brechas de acceso y avanzar hacia una **sociedad digital m√°s equitativa y cohesionada**.

Finalmente, este estudio demuestra el valor del **an√°lisis geoespacial** como herramienta para comprender las din√°micas de desigualdad urbana en la era digital.  
El uso integrado de **pgAdmin y RStudio** permiti√≥ desarrollar un modelo reproducible de an√°lisis territorial, aplicable a otras dimensiones de exclusi√≥n social como la vivienda, la educaci√≥n o el acceso a servicios p√∫blicos.  
En s√≠ntesis, la evidencia emp√≠rica obtenida confirma que la **brecha digital en el Gran Santiago** constituye una manifestaci√≥n contempor√°nea de la desigualdad territorial, y que su reducci√≥n requiere un enfoque integral que combine **infraestructura, pol√≠ticas p√∫blicas y justicia espacial**.  
Solo mediante una conectividad inclusiva y universal ser√° posible avanzar hacia un **Santiago verdaderamente conectado, justo y sostenible**.


------------------------------------------------------------------------



## 4. Bibliograf√≠a

Centro de Estudios del Ministerio de Educaci√≥n (2022). *Condiciones del hogar y brechas en el acceso a la educaci√≥n digital en Chile*. Santiago de Chile: Mineduc.  
Disponible en: https://centroestudios.mineduc.cl/

Comisi√≥n Econ√≥mica para Am√©rica Latina y el Caribe (CEPAL) (2021). *Transformaci√≥n digital y brecha de acceso en Am√©rica Latina y el Caribe*. Santiago de Chile: CEPAL.

Gobierno de Chile ‚Äì Subsecretar√≠a de Telecomunicaciones (SUBTEL) (2022). *Plan Brecha Digital Cero 2022‚Äì2025: Conectividad para todas y todos*. Santiago de Chile.  
Recuperado de: https://www.subtel.gob.cl/gobierno-lanza-plan-brecha-digital-cero-con-foco-en-zonas-sin-conectividad-robo-de-cables-y-trabajo-con-municipios/

Instituto Nacional de Estad√≠sticas (INE) (2018). *Censo de Poblaci√≥n y Vivienda 2017: Base de microdatos*. Santiago de Chile: INE.  
Disponible en: https://www.censo2017.cl/

Ministerio de Desarrollo Social y Familia (MDSF) (2018). *Encuesta de Caracterizaci√≥n Socioecon√≥mica Nacional (CASEN) 2017: Base de datos y documentaci√≥n t√©cnica*. Santiago de Chile.  
Disponible en: https://observatorio.ministeriodesarrollosocial.gob.cl/

Organizaci√≥n de las Naciones Unidas (ONU) (2020). *Informe sobre el desarrollo digital inclusivo: Desigualdades y conectividad global*. Nueva York: Naciones Unidas.

Subsecretar√≠a de Telecomunicaciones (SUBTEL) (2023). *Informe anual de cobertura y conectividad digital en Chile 2023*. Santiago de Chile.  
Disponible en: https://www.subtel.gob.cl/

Vallejo, C., & Araya, C. (2022). *Presentaci√≥n del Plan Brecha Digital Cero: Conectividad como derecho social*. Ministerio Secretar√≠a General de Gobierno y SUBTEL, Santiago de Chile.

V√©liz, C., & Sunkel, G. (2020). *Inclusi√≥n digital y equidad territorial en Am√©rica Latina: desaf√≠os para la pol√≠tica p√∫blica*. Revista CEPAL, 131, 45‚Äì63.

Z√∫√±iga, C. & Mart√≠nez, R. (2021). *Brecha digital y desigualdad urbana en Chile: un an√°lisis territorial del acceso a Internet*. Revista de Geograf√≠a Norte Grande, 79, 155‚Äì178.
